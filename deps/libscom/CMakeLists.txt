cmake_minimum_required(VERSION 2.8)
cmake_policy(SET CMP0015 NEW)
project(libscom)

if(UNIX)
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -O2  -Wall -std=c++11")
else()
    set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} /MT")
    set(CMAKE_CXX_FLAGS_DEBUG "${CMAKE_CXX_FLAGS_DEBUG} /MTd")
    set(CMAKE_CXX_FLAGS_RELEASE "${CMAKE_CXX_FLAGS_RELEASE} /MT")
	message("CURRENT MSVC VERSION:" ${MSVC_VERSION})
endif()

if(UNIX)
    set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/lib)
else()
	if(CMAKE_SIZEOF_VOID_P EQUAL 4)
		set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/out32)
	elseif (CMAKE_SIZEOF_VOID_P EQUAL 8)
		set(LIBRARY_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/out64)
	endif()
endif()
set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/bin)

include_directories(include)
if(UNIX)
    link_directories(${PROJECT_SOURCE_DIR}/lib)
else()
	if(CMAKE_SIZEOF_VOID_P EQUAL 4)
		link_directories(${PROJECT_SOURCE_DIR}/out32)
	elseif (CMAKE_SIZEOF_VOID_P EQUAL 8)
		link_directories(${PROJECT_SOURCE_DIR}/out64)
	endif()
endif()

add_subdirectory(tests)